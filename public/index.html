<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHRONOMUSIOUN</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
</head>
<body>
    <header class="navbar">
        <!-- Navbar: Left (Logo) -->
        <div class="nav-left">
            <div class="logo">CHRONOMUSIOUN</div>
        </div>
        <!-- Navbar: Right (Links + Search + Login) -->
        <div class="nav-right">
            <!-- Navbar: Primary Links -->
            <nav aria-label="Primary">
                <a href="/index.html">Home</a>
                <a href="/favourite.html">Favourite</a>
                <a href="/about.html">About</a>
                <a href="/gallery.html">Gallery</a>
                <a href="/download.html">Download</a>
            </nav>
            <!-- Navbar: Search -->
            <div class="search">
                <input id="searchInput" type="text" placeholder="Search artifacts..." />
            </div>
            <!-- Navbar: Auth -->
            <div id="authArea">
                <a class="btn btn-primary" href="/login.html">Login</a>
            </div>
        </div>
    </header>

    <main>
        <section id="home" class="hero">
            <aside class="hero-right" aria-label="Featured image carousel">
                <img id="heroImage1" class="hero-img" alt="Featured artifact" />
                <img id="heroImage2" class="hero-img" alt="Featured artifact" />
                <img id="heroImage3" class="hero-img" alt="Featured artifact" />
            </aside>
        </section>

        <section class="intro">
            <h1>Timelines of Timekeeping</h1>
            <p>Explore artifacts that shaped how humanity measures time‚Äîancient sundials to modern chronometers.</p>
        </section>

        <section class="featured">
            <div class="section-header">
                <h2>Featured Artifacts</h2>
                <a class="btn" href="/gallery.html">See All</a>
            </div>
            <p id="featuredBlurb" class="blurb">Images on this page are fetched live from the Harvard Art Museums collection. Click an image to open a detail view, save it to Favourites, or download it for study. Titles and dates come directly from the source museum records.</p>
            <div id="featuredGrid" class="grid"></div>
            <div style="padding: 16px 20px; text-align: center;">
                <button id="loadMoreBtn" class="btn">Explore More</button>
            </div>
        </section>
    </main>

    <a href="#top" class="back-to-top">Back To Top ^</a>
    <footer class="footer footer-grid">
        <div class="footer-brand">
            <div class="brand-row">
                <span class="brand-icon">üèõÔ∏è</span>
                <span class="brand-name">CHRONOMUSIOUN</span>
            </div>
            <p>An online museum integrating collections nationally and internationally. Explore and search artworks easily.</p>
            <p class="small">Explore & Discover Museum Collections<br>Features: Gallery | Favourites | Search | Download</p>
        </div>
        <div class="footer-col">
            <h4>QUICK LINKS</h4>
            <a href="/index.html">HOME</a>
            <a href="/gallery.html">GALLERY</a>
        </div>
        <div class="footer-col">
            <h4>HELP</h4>
            <a href="/contact.html">SUPPORT TEAM</a>
            <a href="/contact.html">CONTACT US</a>
        </div>
        <div class="footer-col">
            <h4>ABOUT</h4>
            <a href="/privacy.html">PRIVACY & POLICY</a>
            <a href="/terms.html">TERMS & CONDITION</a>
        </div>
        <div class="footer-col">
            <h4>MAIL US:</h4>
            <a href="mailto:supportteamchrono@hotmail.com">supportteamchrono@hotmail.com</a>
            <a href="mailto:supportteammuseioun@live.in">supportteammuseioun@live.in</a>
        </div>
        <div class="footer-col">
            <h4>OFFICE ADDRESS</h4>
            <div class="address">üìç Greater noida, knowledge park III,<br>gautam budh nagar,<br>pin code 201008</div>
        </div>
        <div class="footer-sep"></div>
        <div class="footer-copy">¬© <span id="year"></span> CHRONOMUSIOUN | All rights reserved</div>
    </footer>

    <!-- Dedicated login/signup pages exist -->

    <script type="module">
// Home page script: set year, populate hero and featured grid from API
document.getElementById('year').textContent = new Date().getFullYear();

const favKey = 'cm_favorites';
let favorites = new Set(JSON.parse(localStorage.getItem(favKey) || '[]'));
function saveFavs(){ localStorage.setItem(favKey, JSON.stringify(Array.from(favorites))); }

function cardTemplate(item){ const isFav = favorites.has(item.id); const icon = isFav ? '‚ù§' : '‚ô°'; return `
<div class="card" data-id="${item.id}">
  <img src="${item.imageUrl}" alt="${item.title}">
  <div class="card-body">
    <div class="card-title">${item.title}</div>
    <div class="card-meta">${item.year||''}</div>
    <div class="card-actions">
      <button class="icon-btn btn-fav">${icon} Favourite</button>
      <a class="icon-btn btn-download" href="/download/${item.id}" download data-title="${encodeURIComponent(item.title)}" data-year="${encodeURIComponent(item.year||'')}" data-image="${encodeURIComponent(item.imageUrl)}">‚¨á Download</a>
    </div>
  </div>
</div>` }

document.addEventListener('click', async (e) => {
  const fav = e.target.closest('.btn-fav');
  if (fav) { const card=e.target.closest('.card'); const id=Number(card.getAttribute('data-id')); const isFav=favorites.has(id); if(isFav) favorites.delete(id); else favorites.add(id); saveFavs(); const data = JSON.parse(card.getAttribute('data-item')||'null'); if(data){ card.outerHTML = cardTemplate(data); } return; }
  const dl = e.target.closest('.btn-download');
  if (dl) { e.preventDefault(); const card=e.target.closest('.card'); const id=Number(card.getAttribute('data-id')); const title=decodeURIComponent(dl.getAttribute('data-title')); const year=decodeURIComponent(dl.getAttribute('data-year')); const imageUrl=decodeURIComponent(dl.getAttribute('data-image')); try{ await fetch('/api/downloads',{ method:'POST', credentials:'include', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ id, title, year, imageUrl }) }); }catch{} window.location.href = dl.getAttribute('href'); }
});

let allItems = [];
let shownCount = 0;

async function renderMore(count=12){
  const grid = document.getElementById('featuredGrid');
  const slice = allItems.slice(shownCount, shownCount + count);
  const html = slice.map(item => {
    const card = cardTemplate(item);
    return card.replace('<div class="card"', `<div class=\"card\" data-id=\"${item.id}\" data-item='${JSON.stringify(item)}'`);
  }).join('');
  grid.insertAdjacentHTML('beforeend', html);
  shownCount += slice.length;
  if (shownCount >= allItems.length) document.getElementById('loadMoreBtn').style.display = 'none';
}

async function loadHome(){
  try{
    const res = await fetch('/api/items', { credentials:'include' });
    if(!res.ok) throw new Error('Failed');
    const items = await res.json();
    // Hero carousel: three images at a time, auto-cycling
    const pics = (items || []).filter(i=>i && i.imageUrl);
    const img1 = document.getElementById('heroImage1');
    const img2 = document.getElementById('heroImage2');
    const img3 = document.getElementById('heroImage3');
    let idx = 0;
    function show(n){
      if(!pics.length) return;
      const len = pics.length;
      const i1 = (n % len + len) % len;
      const i2 = ((n + 1) % len + len) % len;
      const i3 = ((n + 2) % len + len) % len;
      [img1, img2, img3].forEach(el => el.style.opacity = '0');
      setTimeout(()=>{
        img1.src = pics[i1].imageUrl; img1.alt = pics[i1].title; img1.title = pics[i1].title;
        img2.src = pics[i2].imageUrl; img2.alt = pics[i2].title; img2.title = pics[i2].title;
        img3.src = pics[i3].imageUrl; img3.alt = pics[i3].title; img3.title = pics[i3].title;
        [img1, img2, img3].forEach(el => el.style.opacity = '1');
      }, 200);
    }
    show(idx);
    setInterval(()=>{ idx = (idx + 3) % Math.max(1, pics.length); show(idx); }, 3500);
    // Featured grid
    allItems = (items || []);
    document.getElementById('featuredGrid').innerHTML = '';
    shownCount = 0;
    await renderMore(12);
  }catch(e){ /* ignore */ }
}
loadHome();

document.getElementById('loadMoreBtn').addEventListener('click', () => renderMore(12));

// Navbar auth state
async function renderAuth(){
  const area = document.getElementById('authArea');
  try{
    const me = await fetch('/api/me', { credentials:'include' }).then(r=>r.json());
    if (me && me.user) {
      const name = me.user.username || me.user.name || 'User';
      const initial = (name || 'U').slice(0,1).toUpperCase();
      area.innerHTML = `
        <div class="profile">
          <button class="profile-btn" aria-haspopup="true" aria-expanded="false"><span class="avatar">${initial}</span></button>
          <div class="profile-menu" role="menu">
            <a href="/settings.html" role="menuitem">Update Profile</a>
            <a href="/download.html" role="menuitem">My Downloads</a>
            <button id="logoutBtn" role="menuitem" class="menu-btn">Logout</button>
          </div>
        </div>`;
      const btn = area.querySelector('.profile-btn');
      const menu = area.querySelector('.profile-menu');
      btn.addEventListener('click', () => { const open = menu.getAttribute('data-open')==='1'; menu.setAttribute('data-open', open?'0':'1'); });
      document.addEventListener('click', (e)=>{ if(!area.contains(e.target)) menu.setAttribute('data-open','0'); });
      area.querySelector('#logoutBtn').addEventListener('click', async ()=>{ await fetch('/api/logout',{ method:'POST', credentials:'include' }); location.reload(); });
    }
  }catch{}
}
renderAuth();
    </script>
</body>
<style>
:root {
  /* Refreshed palette: higher contrast and cleaner accents */
  --bg: #0b0f18;
  --bg-soft: #131a26;
  --text: #f5f7fb;
  --muted: #9fb0c7;
  --primary: #5c86ff;  /* vivid indigo */
  --accent: #25e0a0;   /* fresh teal */
  --card: #162033;
  --border: #233049;

  --space-1: 6px;
  --space-2: 10px;
  --space-3: 16px;
  --space-4: 20px;
  --radius: 12px;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial;
  background: linear-gradient(180deg, var(--bg) 0%, #0f1320 100%);
  color: var(--text);
}

.navbar {
  position: sticky; top: 0; z-index: 50;
  display: flex; align-items: center; justify-content: space-between;
  padding: var(--space-3) var(--space-4); background: rgba(10,12,18,0.8);
  backdrop-filter: blur(10px); border-bottom: 1px solid var(--border);
}
.nav-left { display: flex; align-items: center; gap: var(--space-3); }
.logo { font-weight: 800; letter-spacing: 1px; color: var(--text); }
.navbar nav { display: flex; align-items: center; gap: var(--space-3); margin-right: var(--space-3); }
.navbar nav a { color: var(--muted); text-decoration: none; }
.navbar nav a:hover { color: var(--text); }
.nav-right { display: flex; align-items: center; gap: var(--space-3); }
.search input { background: var(--card); border: 1px solid var(--border); color: var(--text); padding: 9px 12px; border-radius: var(--radius); min-width: 240px; }

.btn { background: var(--card); color: var(--text); border: 1px solid var(--border); padding: 9px 14px; border-radius: var(--radius); cursor: pointer; }
.btn:hover { border-color: var(--primary); }
.btn-primary { background: var(--primary); border-color: var(--primary); color: #fff; }
.btn-accent { background: var(--accent); border-color: var(--accent); color: #081611; }

.hero { display: grid; grid-template-columns: 1fr; gap: 0; padding: 0; align-items: stretch; width: 100vw; margin-left: calc(50% - 50vw); margin-right: calc(50% - 50vw); }
.hero-left h1 { font-size: 42px; margin: 0 0 10px; }
.hero-left p { color: var(--muted); max-width: 56ch; }
.hero-right { height: 380px; overflow: hidden; border: 0; border-radius: 0; padding: 0; background: var(--bg-soft); display: flex; align-items: center; justify-content: center; gap: 0; margin: 0; }
.hero-right .hero-img { width: 33.333%; height: 100%; object-fit: cover; display: block; transition: opacity .4s ease; opacity: 1; margin: 0; padding: 0; border: 0; }
.scroller { scroll-behavior: smooth; }

.intro { padding: 24px var(--space-4); }
.intro h1 { font-size: 44px; margin: 0 0 10px; }
.featured { padding: var(--space-4) 0 48px; }
.card:hover { transform: translateY(-2px); transition: transform .15s ease; }

.section-header { display: flex; align-items: center; justify-content: space-between; padding: 0 var(--space-4); }
.blurb { color: var(--muted); padding: 6px var(--space-4) 14px; max-width: 90ch; }
.gallery, .about, .favourite, .download-info { padding: var(--space-4) 0 48px; }

.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: var(--space-3); padding: 0 var(--space-4); }
.featured .grid { grid-template-columns: repeat(3, 1fr); }
.card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden; display: flex; flex-direction: column; }
.card img { width: 100%; height: 240px; object-fit: cover; display: block; }
.card-body { padding: var(--space-3); display: grid; gap: 6px; }
.card-title { font-weight: 700; }
.card-meta { color: var(--muted); font-size: 14px; }
.card-actions { display: flex; justify-content: space-between; gap: 10px; margin-top: 8px; }
.icon-btn { background: transparent; border: 1px solid var(--border); color: var(--text); border-radius: var(--radius); padding: 8px 10px; cursor: pointer; display: inline-flex; align-items: center; gap: 6px; }
.icon-btn:hover { border-color: var(--accent); }
.icon { width: 16px; height: 16px; display: inline-block; }

.footer { border-top: 1px solid var(--border); padding: var(--space-4); display: flex; justify-content: space-between; color: var(--muted); background: rgba(10,12,18,0.6); }

/* Footer (multi-column) */
.back-to-top { display:block; text-align:center; padding:10px; color:var(--text); text-decoration:none; background:#bfb7b3; color:#111; font-weight:600 }
.footer-grid { display:grid; grid-template-columns: 2fr 1fr 1fr 1fr 1.2fr 1.6fr; gap:20px; align-items:start }
.footer-brand .brand-row{ display:flex; align-items:center; gap:10px; margin-bottom:8px }
.footer-brand .brand-name{ font-weight:800; letter-spacing:1px }
.footer h4{ margin:0 0 10px 0; color:var(--text); font-size:14px }
.footer a{ color:var(--muted); text-decoration:none; display:block; margin:4px 0 }
.footer a:hover{ color:var(--text) }
.footer .small{ color:var(--muted); font-size:12px }
.footer .address{ color:var(--muted); }
.footer-sep{ grid-column:1/-1; height:1px; background:var(--border); margin-top:10px }
.footer-copy{ grid-column:1/-1; color:var(--muted) }

.modal { border: none; padding: 0; background: transparent; }
.modal::backdrop { background: rgba(0,0,0,0.6); }
.modal-card { background: var(--bg-soft); border: 1px solid var(--border); border-radius: var(--radius); padding: var(--space-3); min-width: 320px; display: grid; gap: 10px; }
.modal-card input { background: var(--card); border: 1px solid var(--border); color: var(--text); padding: 8px 10px; border-radius: 8px; }
.modal-actions { display: flex; justify-content: flex-end; gap: 10px; }

/* Profile menu */
.profile { position: relative; }
.profile-btn { background: var(--card); border:1px solid var(--border); color:var(--text); padding:6px 8px; border-radius: 999px; cursor:pointer; }
.avatar { display:inline-flex; width:28px; height:28px; align-items:center; justify-content:center; background: var(--primary); color:#fff; border-radius:50%; font-weight:700 }
.profile-menu { position:absolute; right:0; top:calc(100% + 6px); background: var(--bg-soft); border:1px solid var(--border); border-radius:10px; padding:8px; display:none; min-width:160px; z-index:60 }
.profile-menu[data-open="1"]{ display:block }
.profile-menu a, .profile-menu .menu-btn { display:block; width:100%; text-align:left; background:transparent; border:0; color:var(--text); text-decoration:none; padding:8px 10px; border-radius:8px; cursor:pointer }
.profile-menu a:hover, .profile-menu .menu-btn:hover { background: var(--card); }

@media (max-width: 900px) {
  .hero { grid-template-columns: 1fr; }
  .featured .grid { grid-template-columns: 1fr; }
}
</style>
</html>


